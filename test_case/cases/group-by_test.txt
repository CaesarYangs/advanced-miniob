SELECT rank, count(id) FROM Customer WHERE id < 300012 GROUP BY rank;
rank | count(id)
1 | 4
2 | 2
3 | 5

SELECT rank, id, count(*) FROM Customer WHERE id < 300012 GROUP BY rank, id;
rank | id | count(*)
1 | 300003 | 1
1 | 300006 | 1
1 | 300007 | 1
1 | 300010 | 1
2 | 300002 | 1
2 | 300011 | 1
3 | 300001 | 1
3 | 300004 | 1
3 | 300005 | 1
3 | 300008 | 1
3 | 300009 | 1

SELECT rank, count(*) FROM Customer WHERE id < 300012 GROUP BY rank HAVING count(*) > 3;
rank | count(*)
1 | 4
3 | 5

SELECT rank, count(*) FROM Customer WHERE id < 300010 GROUP BY rank HAVING count(*) > 3;
rank | count(*)
3 | 5